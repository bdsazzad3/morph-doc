"use strict";(self.webpackChunkmorph_doc=self.webpackChunkmorph_doc||[]).push([[4908],{3949:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>a,frontMatter:()=>t,metadata:()=>c,toc:()=>l});var r=o(4848),i=o(8453);const t={title:"Difference between Morph and Ethereum",lang:"en-US",keywords:["morph","ethereum","rollup","layer2","validity proof","optimstic zk-rollup"],description:"Upgrade your blockchain experience with Morph - the secure decentralized, cost0efficient, and high-performing optimstic zk-rollup solution. Try it now!"},s=void 0,c={id:"how-morph-works/general-protocol-design/difference-between-ethereum-and-morph",title:"Difference between Morph and Ethereum",description:"Upgrade your blockchain experience with Morph - the secure decentralized, cost0efficient, and high-performing optimstic zk-rollup solution. Try it now!",source:"@site/docs/how-morph-works/general-protocol-design/5-difference-between-ethereum-and-morph.md",sourceDirName:"how-morph-works/general-protocol-design",slug:"/how-morph-works/general-protocol-design/difference-between-ethereum-and-morph",permalink:"/docs/how-morph-works/general-protocol-design/difference-between-ethereum-and-morph",draft:!1,unlisted:!1,editUrl:"https://github.com/morph-l2/morph-doc/tree/main/docs/how-morph-works/general-protocol-design/5-difference-between-ethereum-and-morph.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Difference between Morph and Ethereum",lang:"en-US",keywords:["morph","ethereum","rollup","layer2","validity proof","optimstic zk-rollup"],description:"Upgrade your blockchain experience with Morph - the secure decentralized, cost0efficient, and high-performing optimstic zk-rollup solution. Try it now!"},sidebar:"HowSidebar",previous:{title:"Transactions Life Cycle",permalink:"/docs/how-morph-works/general-protocol-design/transactions-life-cycle"}},d={},l=[{value:"EVM Opcodes",id:"evm-opcodes",level:2},{value:"EVM Precompiles",id:"evm-precompiles",level:2},{value:"State Account",id:"state-account",level:2},{value:"<strong>Additional Fields</strong>",id:"additional-fields",level:3},{value:"<strong>CodeHash</strong>",id:"codehash",level:3},{value:"CodeSize",id:"codesize",level:3},{value:"Block Time",id:"block-time",level:2},{value:"Future EIPs",id:"future-eips",level:2},{value:"Transaction Fees",id:"transaction-fees",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"There are several technical differences between Ethereum\u2019s EVM and Morph's optimistic zkEVM."}),"\n",(0,r.jsx)(n.p,{children:"We\u2019ve compiled a list to help you understand these distinctions better."}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"For most Solidity developers, these technical details won't significantly impact your development experience."})}),"\n",(0,r.jsx)(n.h2,{id:"evm-opcodes",children:"EVM Opcodes"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Opcode"}),(0,r.jsx)(n.th,{children:"Solidity equivalent"}),(0,r.jsx)(n.th,{children:"Morph Behavior"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"BLOCKHASH"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"block.blockhash"})}),(0,r.jsxs)(n.td,{children:["Returns ",(0,r.jsx)(n.code,{children:"keccak(chain_id || block_number)"})," for the last 256 blocks."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"COINBASE"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"block.coinbase"})}),(0,r.jsxs)(n.td,{children:["Returns the pre-deployed fee vault contract address. See ",(0,r.jsx)(n.a,{href:"/docs/build-on-morph/developer-resources/contracts",children:"Contracts"}),"."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"DIFFICULTY"})," / ",(0,r.jsx)(n.code,{children:"PREVRANDAO"})]}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"block.difficulty"})}),(0,r.jsx)(n.td,{children:"Returns 0."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"BASEFEE"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"block.basefee"})}),(0,r.jsx)(n.td,{children:"Disabled. If the opcode is encountered, the transaction will be reverted."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"SELFDESTRUCT"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"selfdestruct"})}),(0,r.jsx)(n.td,{children:"Disabled. If the opcode is encountered, the transaction will be reverted."})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"evm-precompiles",children:"EVM Precompiles"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"SHA2-256"})," (address ",(0,r.jsx)(n.code,{children:"0x2"}),"), ",(0,r.jsx)(n.code,{children:"RIPEMD-160"})," (address ",(0,r.jsx)(n.code,{children:"0x3"}),"), and ",(0,r.jsx)(n.code,{children:"blake2f"})," (address ",(0,r.jsx)(n.code,{children:"0x9"}),") precompiles are currently not supported. Calls to these contracts will be reverted. We plan to enable these three precompiles in a future hard fork."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"modexp"})," precompile is supported, but only for inputs up to 32 bytes (i.e. ",(0,r.jsx)(n.code,{children:"u256"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"ecPairing"})," precompile is supported but limits the number of points(sets, pairs) to 4, instead of 6."]}),"\n",(0,r.jsxs)(n.p,{children:["Other EVM precompiles like ",(0,r.jsx)(n.code,{children:"ecRecover"}),", ",(0,r.jsx)(n.code,{children:"identity"}),", ",(0,r.jsx)(n.code,{children:"ecAdd"}),", and ",(0,r.jsx)(n.code,{children:"ecMul"})," are fully supported."]}),"\n",(0,r.jsx)(n.h2,{id:"state-account",children:"State Account"}),"\n",(0,r.jsx)(n.h3,{id:"additional-fields",children:(0,r.jsx)(n.strong,{children:"Additional Fields"})}),"\n",(0,r.jsxs)(n.p,{children:["We have introduced two additional fields in the ",(0,r.jsx)(n.code,{children:"StateAccount"})," object: ",(0,r.jsx)(n.code,{children:"PoseidonCodehash"})," and ",(0,r.jsx)(n.code,{children:"CodeSize"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-go",children:"type StateAccount struct {\n\tNonce    uint64\n\tBalance  *big.Int\n\tRoot     common.Hash // merkle root of the storage trie\n\tKeccakCodeHash []byte // still the Keccak codehash\n\t// added fields\n\tPoseidonCodeHash []byte // the Poseidon codehash\n\tCodeSize uint64\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"codehash",children:(0,r.jsx)(n.strong,{children:"CodeHash"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["There are two types of codehash for each contract bytecode: ",(0,r.jsx)(n.code,{children:"KeccakCodeHash"}),"and ",(0,r.jsx)(n.code,{children:"PoseidonCodeHash"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"KeccakCodeHash"})," is kept to maintain compatibility for EXTCODEHASH."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"PoseidonCodeHash"})," is used for verifying the correctness of bytecodes loaded in the zkEVM, where Poseidon hashing is far more efficient."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"codesize",children:"CodeSize"}),"\n",(0,r.jsxs)(n.p,{children:["When verifying ",(0,r.jsx)(n.code,{children:"EXTCODESIZE"}),", loading the entire contract data into the zkEVM is costly. Instead, we store the contract size in storage at contract creation. This approach avoids the need to load the code, as storage proof is sufficient to verify this opcode."]}),"\n",(0,r.jsx)(n.h2,{id:"block-time",children:"Block Time"}),"\n",(0,r.jsx)(n.admonition,{title:"Block Time Subject to Change",type:"tip",children:(0,r.jsx)(n.p,{children:"Blocks are produced every second, with an empty block generated if there are no transactions for 5 seconds. However, this frequency may change in the future."})}),"\n",(0,r.jsx)(n.p,{children:"To compare, Ethereum has a block time of ~12 seconds."}),"\n",(0,r.jsx)(n.p,{children:"Reasons for Faster Block Time in Morph\nUser Experience:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"A faster, consistent block time provides quicker feedback, enhancing the user experience."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Optimization: As we refine the zkEVM circuits in our testnets, we can achieve higher throughput than Ethereum, even with a smaller gas limit per block or batch."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Notice:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"TIMESTAMP"})," will return the timestamp of the block. It will update every second."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BLOCKNUMBER"})," will return an actual block number. It will update every second. The one-to-one mapping between blocks and transactions will no longer apply."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"future-eips",children:"Future EIPs"}),"\n",(0,r.jsx)(n.p,{children:"Morph closely monitors emerging Ethereum Improvement Proposals (EIPs) and adopts them when suitable. For more specifics, join our community forum or Discord for discussions."}),"\n",(0,r.jsx)(n.h2,{id:"transaction-fees",children:(0,r.jsx)(n.a,{href:"/docs/build-on-morph/build-on-morph/understand-transaction-cost-on-morph",children:"Transaction Fees"})})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>c});var r=o(6540);const i={},t=r.createContext(i);function s(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);