"use strict";(self.webpackChunkmorph_doc=self.webpackChunkmorph_doc||[]).push([[3046],{8332:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>p});var n=t(4848),r=t(8453);const d={title:"Upgrade node running on the host",lang:"en-US"},s=void 0,i={id:"build-on-morph/developer-resources/node-operation/upgrade-node/upgrade-node-host",title:"Upgrade node running on the host",description:"Upgrading the node is straightforward. Simply install the new version of the node executable file and replace the previous version. Then, stop the currently running node and restart it with the updated version. Node will automatically use the data of your old node and sync the latest blocks that were mined since you shut down the old software.",source:"@site/docs/build-on-morph/developer-resources/node-operation/upgrade-node/1-upgrade-node-host.md",sourceDirName:"build-on-morph/developer-resources/node-operation/upgrade-node",slug:"/build-on-morph/developer-resources/node-operation/upgrade-node/upgrade-node-host",permalink:"/docs/build-on-morph/developer-resources/node-operation/upgrade-node/upgrade-node-host",draft:!1,unlisted:!1,editUrl:"https://github.com/morph-l2/morph-doc/tree/main/docs/build-on-morph/developer-resources/node-operation/upgrade-node/1-upgrade-node-host.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Upgrade node running on the host",lang:"en-US"},sidebar:"DeveloperSidebar",previous:{title:"Upgrade node running from docker",permalink:"/docs/build-on-morph/developer-resources/node-operation/upgrade-node/upgrade-node-docker"},next:{title:"Contract Addresses",permalink:"/docs/build-on-morph/developer-resources/contracts"}},a={},p=[{value:"Step1: Compile the new version of the code",id:"step1-compile-the-new-version-of-the-code",level:3},{value:"Step2: Stop nodes",id:"step2-stop-nodes",level:3},{value:"Step3: Restart",id:"step3-restart",level:3}];function l(e){const o={code:"code",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.p,{children:"Upgrading the node is straightforward. Simply install the new version of the node executable file and replace the previous version. Then, stop the currently running node and restart it with the updated version. Node will automatically use the data of your old node and sync the latest blocks that were mined since you shut down the old software."}),"\n",(0,n.jsxs)(o.p,{children:["Running the node requires two binary files: ",(0,n.jsx)(o.code,{children:"morphnode"})," and ",(0,n.jsx)(o.code,{children:"geth"}),". Choose to upgrade the binary files according to your specific needs."]}),"\n",(0,n.jsx)(o.h3,{id:"step1-compile-the-new-version-of-the-code",children:"Step1: Compile the new version of the code"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"git clone https://github.com/morph-l2/morph.git\n## checkout the latest version of the source code you need\ngit checkout ${latestVersion}\n## install geth\nmake nccc_geth\n## install morphnode\ncd ./morph/node && make build\n"})}),"\n",(0,n.jsx)(o.h3,{id:"step2-stop-nodes",children:"Step2: Stop nodes"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"## stop morphnode process\npid=`ps -ef | grep morphnode | grep -v grep | awk '{print $2}'`\nkill  $pid\n\n## stop geth process\npid=`ps -ef | grep geth | grep -v grep | awk '{print $2}'`\nkill  $pid\n"})}),"\n",(0,n.jsx)(o.h3,{id:"step3-restart",children:"Step3: Restart"}),"\n",(0,n.jsx)(o.p,{children:"Make sure to use the same start-up command you used before the upgrade"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:'## start geth\n./morph/go-ethereum/build/bin/geth --morph-holesky \\\n    --datadir "./geth-data" \\\n    --http --http.api=web3,debug,eth,txpool,net,engine \\\n    --authrpc.addr localhost \\\n    --authrpc.vhosts="localhost" \\\n    --authrpc.port 8551 \\\n    --authrpc.jwtsecret=./jwt-secret.txt \\\n    --log.filename=./geth.log\n\n## start geth    \n./morph/node/build/bin/morphnode --home ./node-data \\\n     --l2.jwt-secret ./jwt-secret.txt \\\n     --l2.eth http://localhost:8545 \\\n     --l2.engine http://localhost:8551 \\\n     --log.filename ./node.log \n'})})]})}function h(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,o,t)=>{t.d(o,{R:()=>s,x:()=>i});var n=t(6540);const r={},d=n.createContext(r);function s(e){const o=n.useContext(d);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),n.createElement(d.Provider,{value:o},e.children)}}}]);